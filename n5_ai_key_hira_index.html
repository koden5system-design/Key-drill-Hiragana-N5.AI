<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N5.AI - Reality Check</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: 'Courier New', Courier, monospace; overflow: hidden; }
        .glitch { text-shadow: 2px 0 #ff0000, -2px 0 #00ff00; }
        input { background: transparent; border: none; outline: none; color: transparent; caret-color: #ff0000; }
        .timer-flash { animation: flash 0.1s infinite; }
        @keyframes flash { 50% { opacity: 0; } }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6">

    <!-- Start Screen -->
    <div id="start-screen" class="text-center z-10">
        <h1 class="text-6xl font-black mb-4 glitch">BERANI?</h1>
        <p class="text-zinc-500 text-xs mb-8 tracking-[0.2em]">KECEPATAN BACA LO ADALAH ILUSI.</p>
        <button onclick="startGame()" class="border-2 border-red-600 px-12 py-4 text-red-600 hover:bg-red-600 hover:text-white transition-all font-bold">START SYSTEM</button>
        <p class="mt-6 text-[10px] text-zinc-700 italic">Wajib menggunakan keyboard Jepang (Flick/Kana). Romaji dilarang.</p>
    </div>

    <!-- Game Interface (Hidden at start) -->
    <div id="game-ui" class="hidden w-full max-w-md flex flex-col items-center">
        <div class="flex justify-between w-full mb-12 font-mono text-[10px] text-red-500">
            <span id="rank">RANK: NOBODY</span>
            <span id="timer">TIME: 5.0s</span>
        </div>

        <div id="kana-display" class="text-[15rem] font-black leading-none mb-12">
            あ
        </div>

        <!-- Invisible Input for Keyboard Capture -->
        <input type="text" id="hidden-input" autocomplete="off" autofocus>
        
        <p id="feedback" class="text-[10px] text-zinc-600 mt-4 uppercase tracking-widest text-center">KETIK KARAKTER DI ATAS</p>
    </div>

    <!-- Death Screen -->
    <div id="death-screen" class="hidden text-center">
        <h2 id="death-reason" class="text-4xl font-black text-red-600 mb-2">SYSTEM FAILURE</h2>
        <p id="final-score" class="text-sm mb-8 text-zinc-500">PROGRES ASLI: 0</p>
        <button onclick="location.reload()" class="bg-white text-black px-8 py-2 font-bold text-xs">REBOOT</button>
        <div class="mt-12 opacity-30 grayscale">
            <p class="text-[8px] text-zinc-500">KENAPA GAGAL? KARENA OTAK LO MASIH TERGANTUNG ALFABET.</p>
            <p class="text-[8px] text-zinc-500 mt-2">MAU ALAT YANG SEBENARNYA? TUNGGU MODUL BERIKUTNYA.</p>
        </div>
    </div>

    <script>
        const hiraList = ['あ','い','う','え','お','か','き','ku','け','ko','さ','し','す','せ','そ']; 
        // Note: 'ko' and 'ku' are placeholders to simulate real mapping. 
        // In real app, we map the input string.
        const kanaData = ['あ','い','う','え','お','か','き','く','け','こ','さ','し','す','せ','そ','た','ち','つ','て','と'];
        
        let score = 0;
        let timeLeft = 5.0;
        let timer;
        let currentKana = "";
        let isDead = false;

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-ui').classList.remove('hidden');
            document.getElementById('hidden-input').focus();
            nextTask();
        }

        function nextTask() {
            if(isDead) return;
            currentKana = kanaData[Math.floor(Math.random() * kanaData.length)];
            document.getElementById('kana-display').innerText = currentKana;
            document.getElementById('hidden-input').value = "";
            resetTimer();
        }

        function resetTimer() {
            clearInterval(timer);
            // Difficulty curve
            timeLeft = Math.max(1.0, 5.0 - (score * 0.2)); 
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft -= 0.1;
                updateTimerDisplay();
                if(timeLeft <= 0) die("WAKTU HABIS");
            }, 100);
        }

        function updateTimerDisplay() {
            document.getElementById('timer').innerText = `TIME: ${timeLeft.toFixed(1)}s`;
            if(timeLeft < 1.5) document.getElementById('timer').classList.add('text-white', 'timer-flash');
            else document.getElementById('timer').classList.remove('text-white', 'timer-flash');
        }

        document.getElementById('hidden-input').addEventListener('input', (e) => {
            const input = e.target.value;
            // Check if input matches current Kana
            if(input === currentKana) {
                score++;
                updateRank();
                nextTask();
            }
        });

        function updateRank() {
            let rank = "NOBODY";
            if(score > 50) rank = "SYSTEM MASTER";
            else if(score > 30) rank = "GHOST";
            else if(score > 15) rank = "REBEL";
            else if(score > 5) rank = "AMATEUR";
            document.getElementById('rank').innerText = `RANK: ${rank}`;
            document.getElementById('kana-display').style.color = `rgb(255, ${255 - (score*5)}, ${255 - (score*5)})`;
        }

        function die(reason) {
            isDead = true;
            clearInterval(timer);
            document.getElementById('game-ui').classList.add('hidden');
            document.getElementById('death-screen').classList.remove('hidden');
            document.getElementById('death-reason').innerText = reason;
            document.getElementById('final-score').innerText = `PROGRES ASLI: ${score}`;
        }

        // Keep input focused
        document.addEventListener('click', () => {
            if(!isDead) document.getElementById('hidden-input').focus();
        });
    </script>
</body>
</html>

