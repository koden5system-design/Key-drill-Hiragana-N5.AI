<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N5.AI - Reality Drill V2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: 'Courier New', Courier, monospace; overflow: hidden; }
        .glitch { text-shadow: 3px 0 #ff0000, -3px 0 #00ff00; }
        #user-input { background: transparent; border-bottom: 4px solid #333; outline: none; color: #ff0000; text-align: center; width: 200px; font-size: 5rem; font-weight: 900; caret-color: transparent; }
        #user-input:focus { border-color: #ff0000; }
        .timer-bar { transition: width 0.1s linear; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
        .error-shake { animation: shake 0.15s ease-in-out 2; }
        .hidden { display: none !important; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6">

    <!-- MENU HOME -->
    <div id="home-screen" class="text-center z-10">
        <h1 class="text-6xl font-black mb-2 glitch">N5.AI</h1>
        <p class="text-zinc-500 text-[10px] mb-12 tracking-[0.3em]">BUNUH ROMAJI. TEST NYALI LO.</p>
        
        <div class="space-y-4 flex flex-col items-center">
            <button onclick="setupGame(5000, 'EASY')" class="w-64 border border-zinc-700 py-3 hover:bg-white hover:text-black transition-all font-bold text-xs">1. EASY (5s/CHAR)</button>
            <button onclick="setupGame(3000, 'MID')" class="w-64 border border-zinc-700 py-3 hover:bg-white hover:text-black transition-all font-bold text-xs">2. MID (3s/CHAR)</button>
            <button onclick="setupGame(2000, 'EKSTRIM')" class="w-64 border border-red-600 py-3 text-red-600 hover:bg-red-600 hover:text-white transition-all font-bold text-xs">3. EKSTRIM (2s/CHAR)</button>
        </div>
        
        <p class="mt-12 text-[9px] text-zinc-600">PASTIKAN KEYBOARD JEPANG AKTIF. ROMAJI = MATI.</p>
    </div>

    <!-- GAMEPLAY UI -->
    <div id="game-ui" class="hidden w-full max-w-md flex flex-col items-center">
        <div class="flex justify-between w-full mb-8 font-mono text-[10px]">
            <span id="level-display" class="text-red-600 font-bold tracking-widest">LVL: ---</span>
            <span id="score-display" class="text-white">STREAK: 0</span>
        </div>

        <!-- Progress Bar -->
        <div class="w-full h-1 bg-zinc-900 mb-12">
            <div id="timer-bar" class="timer-bar h-full bg-red-600 w-full"></div>
        </div>

        <div id="target-kana" class="text-[12rem] font-black leading-none mb-4">あ</div>
        
        <input type="text" id="user-input" autocomplete="off" autofocus>
        
        <p class="text-[10px] text-zinc-700 mt-8 tracking-widest uppercase">Input via Keyboard Jepang</p>
    </div>

    <!-- RESULT SCREEN -->
    <div id="result-screen" class="hidden text-center">
        <h2 id="fail-reason" class="text-4xl font-black text-red-600 mb-2">SYSTEM FAILURE</h2>
        <p id="final-stats" class="text-sm mb-12 text-zinc-500">STREAK ASLI: 0</p>
        
        <div class="space-y-4 flex flex-col items-center">
            <button onclick="restart()" class="w-64 bg-white text-black py-3 font-bold text-xs">ULANGI RITUAL</button>
            <a href="http://lynk.id/n5.ai/nwzl1gwr03om/checkout" class="w-64 border border-red-600 py-3 text-red-600 font-bold text-xs animate-pulse">DOWNLOAD CODEBREAKER (Rp4.900)</a>
        </div>

        <p class="mt-12 text-[10px] text-zinc-700 max-w-xs mx-auto">"Program lain akan hadir di modul selanjutnya, pantau terus N5.AI"</p>
    </div>

    <script>
        const kanaLibrary = [
            'あ','い','う','え','お',
            'か','き','く','け','こ',
            'さ','し','す','せ','そ',
            'た','ち','つ','て','と',
            'な','に','ぬ','ね','の',
            'は','ひ','ふ','へ','ほ'
        ];

        // AI Mock Logic: Track failed or slow characters
        let failTracker = {}; 
        let currentLevel = "";
        let baseTime = 5000;
        let score = 0;
        let timer;
        let timeLeft = 100;
        let targetKana = "";
        let startTime;

        const home = document.getElementById('home-screen');
        const ui = document.getElementById('game-ui');
        const res = document.getElementById('result-screen');
        const input = document.getElementById('user-input');

        function setupGame(time, lv) {
            baseTime = time;
            currentLevel = lv;
            home.classList.add('hidden');
            ui.classList.remove('hidden');
            document.getElementById('level-display').innerText = `LVL: ${lv}`;
            input.focus();
            score = 0;
            nextTurn();
        }

        function nextTurn() {
            // "AI" Logic: Seringkan karakter yang pernah bikin gagal
            let pool = [...kanaLibrary];
            Object.keys(failTracker).forEach(k => {
                if(failTracker[k] > 1) pool.push(k, k); // Double probability for struggle chars
            });

            targetKana = pool[Math.floor(Math.random() * pool.length)];
            document.getElementById('target-kana').innerText = targetKana;
            input.value = "";
            
            startTimer();
            startTime = Date.now();
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 100;
            const step = 100 / (baseTime / 100);
            
            timer = setInterval(() => {
                timeLeft -= step;
                document.getElementById('timer-bar').style.width = `${timeLeft}%`;
                if(timeLeft <= 0) die("WAKTU HABIS");
            }, 100);
        }

        input.addEventListener('input', (e) => {
            if(e.target.value === targetKana) {
                const responseTime = Date.now() - startTime;
                // Jika respon lambat (>70% waktu), anggap sulit
                if(responseTime > baseTime * 0.7) {
                    failTracker[targetKana] = (failTracker[targetKana] || 0) + 1;
                }
                
                score++;
                document.getElementById('score-display').innerText = `STREAK: ${score}`;
                nextTurn();
            }
        });

        function die(reason) {
            clearInterval(timer);
            failTracker[targetKana] = (failTracker[targetKana] || 0) + 2; // Penalize death char
            document.body.classList.add('error-shake');
            setTimeout(() => document.body.classList.remove('error-shake'), 200);
            
            ui.classList.add('hidden');
            res.classList.remove('hidden');
            document.getElementById('fail-reason').innerText = reason;
            document.getElementById('final-stats').innerText = `STREAK ASLI: ${score}`;
        }

        function restart() {
            res.classList.add('hidden');
            home.classList.remove('hidden');
        }

        // Auto-focus handler
        document.addEventListener('click', () => {
            if(!ui.classList.contains('hidden')) input.focus();
        });
    </script>
</body>
</html>

